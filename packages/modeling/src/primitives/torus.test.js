const test = require('ava')

const geom3 = require('../geometry/geom3')

const {torus} = require('./index')

const comparePolygonsAsPoints = require('../../test/helpers/comparePolygonsAsPoints')

test('torus (defaults)', t => {
  const obs = torus()
  const pts = geom3.toPoints(obs)
  const exp = [
  ]
  t.is(pts.length, 384) // 12 * 16 * 2 (polys/segement) = 384
  //t.true(comparePolygonsAsPoints(pts, exp))
})

test('torus (custom inner circle, customer outer circle)', t => {
  const obs = torus({innerRadius: 0.5, innerSegments: 4, innerRotation: Math.PI/4, outerRadius: 5, outerSegments: 4})
  const pts = geom3.toPoints(obs)
  const exp = [
    [ [ 5.353553295135498, 2.1648901508566386e-17, 0.3535533845424652 ],
      [ 5.353553295135498, -2.1648901508566386e-17, -0.3535533845424652 ],
      [ 3.4945950954597983e-16, 5.353553295135498, -0.3535533845424652 ] ],
    [ [ 5.353553295135498, 2.1648901508566386e-17, 0.3535533845424652 ],
      [ 3.4945950954597983e-16, 5.353553295135498, -0.3535533845424652 ],
      [ 3.0616169991140216e-16, 5.353553295135498, 0.3535533845424652 ] ],
    [ [ 4.646446704864502, 2.1648901508566386e-17, 0.3535533845424652 ],
      [ 5.353553295135498, 2.1648901508566386e-17, 0.3535533845424652 ],
      [ 3.0616169991140216e-16, 5.353553295135498, 0.3535533845424652 ] ],
    [ [ 4.646446704864502, 2.1648901508566386e-17, 0.3535533845424652 ],
      [ 3.0616169991140216e-16, 5.353553295135498, 0.3535533845424652 ],
      [ 2.628639167466041e-16, 4.646446704864502, 0.3535533845424652 ] ],
    [ [ 4.646446704864502, -2.1648901508566386e-17, -0.3535533845424652 ],
      [ 4.646446704864502, 2.1648901508566386e-17, 0.3535533845424652 ],
      [ 2.628639167466041e-16, 4.646446704864502, 0.3535533845424652 ] ],
    [ [ 4.646446704864502, -2.1648901508566386e-17, -0.3535533845424652 ],
      [ 2.628639167466041e-16, 4.646446704864502, 0.3535533845424652 ],
      [ 3.0616172638118176e-16, 4.646446704864502, -0.3535533845424652 ] ],
    [ [ 5.353553295135498, -2.1648901508566386e-17, -0.3535533845424652 ],
      [ 4.646446704864502, -2.1648901508566386e-17, -0.3535533845424652 ],
      [ 3.0616172638118176e-16, 4.646446704864502, -0.3535533845424652 ] ],
    [ [ 5.353553295135498, -2.1648901508566386e-17, -0.3535533845424652 ],
      [ 3.0616172638118176e-16, 4.646446704864502, -0.3535533845424652 ],
      [ 3.4945950954597983e-16, 5.353553295135498, -0.3535533845424652 ] ],
    [ [ 3.0616169991140216e-16, 5.353553295135498, 0.3535533845424652 ],
      [ 3.4945950954597983e-16, 5.353553295135498, -0.3535533845424652 ],
      [ -5.353553295135498, 6.772701275095606e-16, -0.3535533845424652 ] ],
    [ [ 3.0616169991140216e-16, 5.353553295135498, 0.3535533845424652 ],
      [ -5.353553295135498, 6.772701275095606e-16, -0.3535533845424652 ],
      [ -5.353553295135498, 6.339722914052034e-16, 0.3535533845424652 ] ],
    [ [ 2.628639167466041e-16, 4.646446704864502, 0.3535533845424652 ],
      [ 3.0616169991140216e-16, 5.353553295135498, 0.3535533845424652 ],
      [ -5.353553295135498, 6.339722914052034e-16, 0.3535533845424652 ] ],
    [ [ 2.628639167466041e-16, 4.646446704864502, 0.3535533845424652 ],
      [ -5.353553295135498, 6.339722914052034e-16, 0.3535533845424652 ],
      [ -4.646446704864502, 5.473767250756072e-16, 0.3535533845424652 ] ],
    [ [ 3.0616172638118176e-16, 4.646446704864502, -0.3535533845424652 ],
      [ 2.628639167466041e-16, 4.646446704864502, 0.3535533845424652 ],
      [ -4.646446704864502, 5.473767250756072e-16, 0.3535533845424652 ] ],
    [ [ 3.0616172638118176e-16, 4.646446704864502, -0.3535533845424652 ],
      [ -4.646446704864502, 5.473767250756072e-16, 0.3535533845424652 ],
      [ -4.646446704864502, 5.906745611799645e-16, -0.3535533845424652 ] ],
    [ [ 3.4945950954597983e-16, 5.353553295135498, -0.3535533845424652 ],
      [ 3.0616172638118176e-16, 4.646446704864502, -0.3535533845424652 ],
      [ -4.646446704864502, 5.906745611799645e-16, -0.3535533845424652 ] ],
    [ [ 3.4945950954597983e-16, 5.353553295135498, -0.3535533845424652 ],
      [ -4.646446704864502, 5.906745611799645e-16, -0.3535533845424652 ],
      [ -5.353553295135498, 6.772701275095606e-16, -0.3535533845424652 ] ],
    [ [ -5.353553295135498, 6.339722914052034e-16, 0.3535533845424652 ],
      [ -5.353553295135498, 6.772701275095606e-16, -0.3535533845424652 ],
      [ -1.0050806131242434e-15, -5.353553295135498, -0.3535533845424652 ] ],
    [ [ -5.353553295135498, 6.339722914052034e-16, 0.3535533845424652 ],
      [ -1.0050806131242434e-15, -5.353553295135498, -0.3535533845424652 ],
      [ -9.617828299594454e-16, -5.353553295135498, 0.3535533845424652 ] ],
    [ [ -4.646446704864502, 5.473767250756072e-16, 0.3535533845424652 ],
      [ -5.353553295135498, 6.339722914052034e-16, 0.3535533845424652 ],
      [ -9.617828299594454e-16, -5.353553295135498, 0.3535533845424652 ] ],
    [ [ -4.646446704864502, 5.473767250756072e-16, 0.3535533845424652 ],
      [ -9.617828299594454e-16, -5.353553295135498, 0.3535533845424652 ],
      [ -8.318894804650511e-16, -4.646446704864502, 0.3535533845424652 ] ],
    [ [ -4.646446704864502, 5.906745611799645e-16, -0.3535533845424652 ],
      [ -4.646446704864502, 5.473767250756072e-16, 0.3535533845424652 ],
      [ -8.318894804650511e-16, -4.646446704864502, 0.3535533845424652 ] ],
    [ [ -4.646446704864502, 5.906745611799645e-16, -0.3535533845424652 ],
      [ -8.318894804650511e-16, -4.646446704864502, 0.3535533845424652 ],
      [ -8.751873165694084e-16, -4.646446704864502, -0.3535533845424652 ] ],
    [ [ -5.353553295135498, 6.772701275095606e-16, -0.3535533845424652 ],
      [ -4.646446704864502, 5.906745611799645e-16, -0.3535533845424652 ],
      [ -8.751873165694084e-16, -4.646446704864502, -0.3535533845424652 ] ],
    [ [ -5.353553295135498, 6.772701275095606e-16, -0.3535533845424652 ],
      [ -8.751873165694084e-16, -4.646446704864502, -0.3535533845424652 ],
      [ -1.0050806131242434e-15, -5.353553295135498, -0.3535533845424652 ] ],
    [ [ -9.617828299594454e-16, -5.353553295135498, 0.3535533845424652 ],
      [ -1.0050806131242434e-15, -5.353553295135498, -0.3535533845424652 ],
      [ 5.353553295135498, -1.3328913634367222e-15, -0.3535533845424652 ] ],
    [ [ -9.617828299594454e-16, -5.353553295135498, 0.3535533845424652 ],
      [ 5.353553295135498, -1.3328913634367222e-15, -0.3535533845424652 ],
      [ 5.353553295135498, -1.2895935802719242e-15, 0.3535533845424652 ] ],
    [ [ -8.318894804650511e-16, -4.646446704864502, 0.3535533845424652 ],
      [ -9.617828299594454e-16, -5.353553295135498, 0.3535533845424652 ],
      [ 5.353553295135498, -1.2895935802719242e-15, 0.3535533845424652 ] ],
    [ [ -8.318894804650511e-16, -4.646446704864502, 0.3535533845424652 ],
      [ 5.353553295135498, -1.2895935802719242e-15, 0.3535533845424652 ],
      [ 4.646446704864502, -1.1164023417336135e-15, 0.3535533845424652 ] ],
    [ [ -8.751873165694084e-16, -4.646446704864502, -0.3535533845424652 ],
      [ -8.318894804650511e-16, -4.646446704864502, 0.3535533845424652 ],
      [ 4.646446704864502, -1.1164023417336135e-15, 0.3535533845424652 ] ],
    [ [ -8.751873165694084e-16, -4.646446704864502, -0.3535533845424652 ],
      [ 4.646446704864502, -1.1164023417336135e-15, 0.3535533845424652 ],
      [ 4.646446704864502, -1.1597001248984115e-15, -0.3535533845424652 ] ],
    [ [ -1.0050806131242434e-15, -5.353553295135498, -0.3535533845424652 ],
      [ -8.751873165694084e-16, -4.646446704864502, -0.3535533845424652 ],
      [ 4.646446704864502, -1.1597001248984115e-15, -0.3535533845424652 ] ],
    [ [ -1.0050806131242434e-15, -5.353553295135498, -0.3535533845424652 ],
      [ 4.646446704864502, -1.1597001248984115e-15, -0.3535533845424652 ],
      [ 5.353553295135498, -1.3328913634367222e-15, -0.3535533845424652 ] ]
  ]
  t.is(pts.length, 32) // 4 * 4 * 2 (polys/segment) = 32
  t.true(comparePolygonsAsPoints(pts, exp))
})
